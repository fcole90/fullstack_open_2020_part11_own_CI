(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{264:function(e,a,t){e.exports=t(442)},442:function(e,a,t){"use strict";t.r(a);var n,r,l=t(0),c=t.n(l),i=t(63),o=t.n(i),u=t(62),s=(t(269),t(38)),m=t.n(s),d=t(64),p=t(28),h=t(52),E=t.n(h),b=t(19),f=t(450),v=t(462),g=t(459),O=t(451),y="http://localhost:3001/api",k=t(76),C=t(15),j=function(e){return{type:"SET_PATIENT_LIST",payload:e}},D=function(e){return{type:"SET_DIAGNOSES_LIST",payload:e}},w=function(e){return{type:"UPDATE_PATIENT",payload:e}},S={patients:{},diagnoses:{}},N=Object(l.createContext)([S,function(){return S}]),T=function(e){var a=e.reducer,t=e.children,n=Object(l.useReducer)(a,S),r=Object(p.a)(n,2),i=r[0],o=r[1];return c.a.createElement(N.Provider,{value:[i,o]},t)},Y=function(){return Object(l.useContext)(N)},H=t(456),x=t(453),A=t(461),L=t(460),F=t(16),R=t(452),M=t(455),I=function(e){var a=e.name,t=e.label,n=e.options;return c.a.createElement(R.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(F.b,{as:"select",name:a,className:"ui dropdown"},n.map((function(e){return c.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},P=function(e){return I(e)},_=function(e){var a=e.field,t=e.label,n=e.placeholder;return c.a.createElement(R.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(F.b,Object.assign({placeholder:n},a)),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(F.a,{name:a.name})))},U=function(e){var a=e.field,t=e.label,n=e.min,r=e.max;return c.a.createElement(R.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(F.b,Object.assign({},a,{type:"number",min:n,max:r})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(F.a,{name:a.name})))},q=function(e){var a=e.diagnoses,t=e.setFieldValue,n=e.setFieldTouched,r="diagnosisCodes",l=a.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return c.a.createElement(R.a.Field,null,c.a.createElement("label",null,"Diagnoses"),c.a.createElement(M.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:l,onChange:function(e,a){n(r,!0),t(r,a.value)}}),c.a.createElement(F.a,{name:r}))};!function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(n||(n={})),function(e){e.Male="male",e.TransMale="transmale",e.Female="female",e.TransFemale="transfemale",e.GenderQueer="genderqueer",e.Other="other",e.Unknown="unknown"}(r||(r={}));var B=Object.values(r).map((function(e){return"other"===e?{value:e,label:"Something Else"}:"unknown"===e?{value:e,label:"Decline to Answer"}:{value:e,label:(a=e,a.charAt(0).toUpperCase()+a.slice(1))};var a})),V=function(e){var a=e.onSubmit,t=e.onCancel;return c.a.createElement(F.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:r.Other},onSubmit:a,validate:function(e){var a={};return e.name||(a.name="Field is required"),e.ssn||(a.ssn="Field is required"),e.dateOfBirth||(a.dateOfBirth="Field is required"),e.occupation||(a.occupation="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty;return c.a.createElement(F.c,{className:"form ui"},c.a.createElement(F.b,{label:"Name",placeholder:"Name",name:"name",component:_}),c.a.createElement(F.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:_}),c.a.createElement(F.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:_}),c.a.createElement(F.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:_}),c.a.createElement(P,{label:"Gender",name:"gender",options:B}),c.a.createElement(L.a,null,c.a.createElement(L.a.Column,{floated:"left",width:5},c.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(L.a.Column,{floated:"right",width:5},c.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},G=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error;return c.a.createElement(x.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(x.a.Header,null,"Add a new patient"),c.a.createElement(x.a.Content,null,r&&c.a.createElement(A.a,{inverted:!0,color:"red"},"Error: ".concat(r)),c.a.createElement(V,{onSubmit:n,onCancel:t})))},W=t(464),J=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],z=function(e){var a=e.rating,t=e.showText;return c.a.createElement("div",{className:"health-bar"},c.a.createElement(W.a,{icon:"heart",disabled:!0,rating:4-a,maxRating:4}),t?c.a.createElement("p",null,J[a]):null)},Q=function(){var e=Y(),a=Object(p.a)(e,2),t=a[0].patients,n=a[1],r=c.a.useState(!1),l=Object(p.a)(r,2),i=l[0],o=l[1],s=c.a.useState(),h=Object(p.a)(s,2),b=h[0],v=h[1],O=function(){o(!1),v(void 0)},k=function(){var e=Object(d.a)(m.a.mark((function e(a){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("submitNewPatient:",a),e.prev=1,e.next=4,E.a.post("".concat(y,"/patients"),a);case 4:t=e.sent,r=t.data,n({type:"ADD_PATIENT",payload:r}),O(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0.response.data),v(e.t0.response.data.error);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"App"},c.a.createElement(f.a,{textAlign:"center"},c.a.createElement("h3",null,"Patient list")),c.a.createElement(H.a,{celled:!0},c.a.createElement(H.a.Header,null,c.a.createElement(H.a.Row,null,c.a.createElement(H.a.HeaderCell,null,"Name"),c.a.createElement(H.a.HeaderCell,null,"Gender"),c.a.createElement(H.a.HeaderCell,null,"Occupation"),c.a.createElement(H.a.HeaderCell,null,"Health Rating"))),c.a.createElement(H.a.Body,null,Object.values(t).map((function(e){return c.a.createElement(H.a.Row,{key:e.id},c.a.createElement(H.a.Cell,null,c.a.createElement(u.b,{to:"/".concat(e.id)},e.name)),c.a.createElement(H.a.Cell,null,e.gender),c.a.createElement(H.a.Cell,null,e.occupation),c.a.createElement(H.a.Cell,null,c.a.createElement(z,{showText:!1,rating:1})))})))),c.a.createElement(G,{modalOpen:i,onSubmit:k,error:b,onClose:O}),c.a.createElement(g.a,{onClick:function(){return o(!0)}},"Add New Patient"))},K=t(457),X=t(458),Z=t(55),$=function(e){switch(e.gender){case"male":return c.a.createElement(Z.a,{name:"mars"});case"female":return c.a.createElement(Z.a,{name:"venus"});case"transmale":case"transfemale":return c.a.createElement(Z.a,{name:"transgender alternate"});case"genderqueer":return c.a.createElement(Z.a,{name:"mercury"});default:return c.a.createElement(Z.a,{name:"genderless"})}},ee=function(e){var a=e.entry,t=e.icon,n=e.children,r=e.extras,l=e.headers;return c.a.createElement(X.a,{fluid:!0},c.a.createElement(X.a.Content,null,c.a.createElement(X.a.Header,null,a.date,c.a.createElement(Z.a,{name:t,size:"large"}),l),c.a.createElement(X.a.Description,null,c.a.createElement("em",null,a.description)),n),c.a.createElement(X.a.Content,{extra:!0},r))},ae=function(e){var a=e.entry,t=e.children;return c.a.createElement(ee,{entry:a,icon:"doctor",extras:t},c.a.createElement(Z.a,{name:"heart",color:0===a.healthCheckRating?"green":1===a.healthCheckRating?"yellow":2===a.healthCheckRating?"orange":"red"}))},te=function(e){var a=e.entry,t=e.children;return c.a.createElement(ee,{entry:a,icon:"stethoscope",extras:t,headers:c.a.createElement(c.a.Fragment,null,a.employerName)},a.sickLeave&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",null,"Sick leave:"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("strong",null,"From:")," ",a.sickLeave.startDate),c.a.createElement("li",null,c.a.createElement("strong",null,"To:")," ",a.sickLeave.endDate))))},ne=function(e){var a=e.entry,t=e.children;return c.a.createElement(ee,{entry:a,icon:"hospital symbol",extras:t},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("strong",null,"Discharged on:")," ",a.discharge.date),c.a.createElement("li",null,c.a.createElement("strong",null,"Criteria:")," ",a.discharge.criteria)))},re=function(e){var a=e.entry,t=e.children;switch(a.type){case"HealthCheck":return c.a.createElement(ae,{entry:a},t);case"OccupationalHealthcare":return c.a.createElement(te,{entry:a},t);case"Hospital":return c.a.createElement(ne,{entry:a},t);default:return function(e){throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(a)}},le=function(e){var a=e.diagnoses;return c.a.createElement(c.a.Fragment,null,a.map((function(e){return c.a.createElement("li",{key:e.code},e.code," ",c.a.createElement("em",null,e.name))})))},ce=[{value:"HealthCheck",label:"Health check"},{value:"OccupationalHealthcare",label:"Occupational healthcare"},{value:"Hospital",label:"Hospital"}],ie=function(e){var a=e.onSubmit,t=e.onCancel,n=Y(),r=Object(p.a)(n,1)[0].diagnoses,i=Object(l.useState)("HealthCheck"),o=Object(p.a)(i,2),u=o[0],s=o[1],m={description:"",date:"",specialist:"",diagnosisCodes:[]},d=Object(C.a)(Object(C.a)({},m),{},{type:"HealthCheck",healthCheckRating:0}),h=Object(C.a)(Object(C.a)({},m),{},{type:"Hospital",discharge:{date:"",criteria:""}}),E=Object(C.a)(Object(C.a)({},m),{},{type:"OccupationalHealthcare",employerName:"",sickLeave:{startDate:"",endDate:""}}),b=Object(C.a)(Object(C.a)(Object(C.a)(Object(C.a)(Object(C.a)({},m),d),h),E),{},{type:"HealthCheck"}),f=function(e){return 10===e.length&&!isNaN(Date.parse(e))};return c.a.createElement(F.d,{initialValues:b,onSubmit:function(e){return a(function(e){var a,t;return Object(C.a)(Object(C.a)({},e),{},{sickLeave:""!==(null===(a=e.sickLeave)||void 0===a?void 0:a.startDate)&&""!==(null===(t=e.sickLeave)||void 0===t?void 0:t.endDate)?e.sickLeave:void 0})}(e))},validate:function(e){var a,t,n="Field is required",r={};switch(e.description||(r.description=n),e.specialist||(r.specialist=n),e.date?f(e.date)||(r.date="Wrong format. Use YYYY-MM-DD format"):r.date=n,u){case"HealthCheck":void 0===e.healthCheckRating?r.healthCheckRating=n:(e.healthCheckRating<0||e.healthCheckRating>3)&&(r.healthCheckRating="The value must be in range 0-3");break;case"Hospital":e.discharge.criteria||(r.discharge={criteria:n}),e.discharge.date?f(e.discharge.date)||(r.discharge={date:"Wrong format. Use YYYY-MM-DD format"}):r["discharge.date"]=n;break;case"OccupationalHealthcare":e.employerName||(r.employerName=n),(null===(a=e.sickLeave)||void 0===a?void 0:a.startDate)&&!f(e.sickLeave.startDate)&&(r.sickLeave={startDate:"Wrong format. Use YYYY-MM-DD format"}),(null===(t=e.sickLeave)||void 0===t?void 0:t.endDate)&&!f(e.sickLeave.endDate)&&(r.sickLeave={endDate:"Wrong format. Use YYYY-MM-DD format"})}return r}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(F.c,{className:"form ui"},c.a.createElement(R.a.Select,{label:"Entry type",name:"type",value:u,onChange:function(e,a){s(a.value),i("type",!0),l("type",a.value)},options:ce.map((function(e){var a=e.value;return{key:a,value:a,text:e.label}}))}),c.a.createElement(F.b,{label:"Description",placeholder:"describe the entry",name:"description",component:_}),c.a.createElement(F.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:_}),c.a.createElement(F.b,{label:"Specialist",placeholder:"Name Surname",name:"specialist",component:_}),"HealthCheck"===u&&c.a.createElement(F.b,{label:"Health Check Rating",name:"healthCheckRating",component:U,min:0,max:3}),"Hospital"===u&&c.a.createElement(c.a.Fragment,null,c.a.createElement(F.b,{label:"Discharge Date",placeholder:"YYYY-MM-DD",name:"discharge.date",component:_}),c.a.createElement(F.b,{label:"Discharge Criteria",placeholder:"criteria",name:"discharge.criteria",component:_})),"OccupationalHealthcare"===u&&c.a.createElement(c.a.Fragment,null,c.a.createElement(F.b,{label:"Employer name",placeholder:"ACME Inc.",name:"employerName",component:_}),c.a.createElement(F.b,{label:"Sick Leave (Start Date)",placeholder:"YYYY-MM-DD",name:"sickLeave.startDate",component:_}),c.a.createElement(F.b,{label:"Sick Leave (End Date)",placeholder:"YYYY-MM-DD",name:"sickLeave.endDate",component:_})),c.a.createElement(q,{setFieldValue:l,setFieldTouched:i,diagnoses:Object.values(r)}),c.a.createElement(L.a,null,c.a.createElement(L.a.Column,{floated:"left",width:5},c.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(L.a.Column,{floated:"right",width:5},c.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},oe=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error;return c.a.createElement(x.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(x.a.Header,null,"Add a new Entry"),c.a.createElement(x.a.Content,null,r&&c.a.createElement(A.a,{inverted:!0,color:"red"},"Error: ".concat(r)),c.a.createElement(ie,{onSubmit:n,onCancel:t})))},ue=function(){var e=Object(b.f)().id,a=Y(),t=Object(p.a)(a,2),n=t[0],r=n.patients,i=n.diagnoses,o=t[1],u=r[e],s=Object(l.useState)(!1),h=Object(p.a)(s,2),v=h[0],O=h[1],k=Object(l.useState)(),C=Object(p.a)(k,2),j=C[0],D=C[1],S=function(){O(!1),D(void 0)},N=function(){var e=Object(d.a)(m.a.mark((function e(a){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("submitNewEntry:",a),e.prev=1,e.next=4,E.a.post("".concat(y,"/patients/").concat(u.id,"/entries"),a);case 4:t=e.sent,n=t.data,o(w(n)),S(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0.response.data),D(e.t0.response.data.error);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}();return u?c.a.createElement("div",{className:"App"},c.a.createElement(f.a,null,c.a.createElement("h1",null,u.name,c.a.createElement($,{gender:u.gender})),c.a.createElement(K.a,null,c.a.createElement(K.a.Item,null,"ssn: ",u.ssn),c.a.createElement(K.a.Item,null,"occupation: ",u.occupation)),0===u.entries.length?c.a.createElement("h2",null,"No entries"):c.a.createElement("div",null,c.a.createElement("h2",null,"Entries:"),c.a.createElement(X.a.Group,null,u.entries.map((function(e){return c.a.createElement(re,{key:e.id,entry:e},e.diagnosisCodes?c.a.createElement(le,{diagnoses:e.diagnosisCodes.map((function(e){var a;return null!==(a=i[e])&&void 0!==a?a:{code:e,name:"Unknown"}}))}):c.a.createElement("p",null,"No diagnosis code available for this entry"))}))))),c.a.createElement(oe,{modalOpen:v,onSubmit:N,error:j,onClose:S}),c.a.createElement(g.a,{style:{marginTop:"1em"},onClick:function(){return O(!0)}},"Add New Entry")):c.a.createElement(f.a,null,c.a.createElement("h1",null,"No patient found with such ID"),c.a.createElement("pre",null,"Submitted ID: ",e))},se=function(){var e=Y(),a=Object(p.a)(e,2)[1];return Object(l.useEffect)((function(){E.a.get("".concat(y,"/ping"));var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(y,"/patients"));case 3:t=e.sent,n=t.data,a(j(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(y,"/diagnoses"));case 3:t=e.sent,n=t.data,a(D(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[a]),c.a.createElement("div",{className:"App"},c.a.createElement(f.a,null,c.a.createElement(v.a,{as:"h1"},"Patientor"),c.a.createElement(g.a,{as:u.b,to:"/",primary:!0},"Home"),c.a.createElement(O.a,{hidden:!0}),c.a.createElement(b.c,null,c.a.createElement(b.a,{path:"/:id"},c.a.createElement(ue,null)),c.a.createElement(b.a,{path:"/"},c.a.createElement(Q,null)))))};o.a.render(c.a.createElement(u.a,null,c.a.createElement(T,{reducer:function(e,a){switch(a.type){case"SET_PATIENT_LIST":return Object(C.a)(Object(C.a)({},e),{},{patients:Object(C.a)(Object(C.a)({},a.payload.reduce((function(e,a){return Object(C.a)(Object(C.a)({},e),{},Object(k.a)({},a.id,a))}),{})),e.patients)});case"SET_DIAGNOSES_LIST":return Object(C.a)(Object(C.a)({},e),{},{diagnoses:Object(C.a)(Object(C.a)({},a.payload.reduce((function(e,a){return Object(C.a)(Object(C.a)({},e),{},Object(k.a)({},a.code,a))}),{})),e.diagnoses)});case"ADD_PATIENT":case"UPDATE_PATIENT":return Object(C.a)(Object(C.a)({},e),{},{patients:Object(C.a)(Object(C.a)({},e.patients),{},Object(k.a)({},a.payload.id,a.payload))});default:return e}}},c.a.createElement(se,null))),document.getElementById("root"))}},[[264,1,2]]]);
//# sourceMappingURL=main.acc233b4.chunk.js.map